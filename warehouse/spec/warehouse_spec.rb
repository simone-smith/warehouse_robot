require 'warehouse'

describe Warehouse do
  subject(:warehouse) { Warehouse.new }

  it "displays the current location of the robot" do
    expect(warehouse.display).to eq [
      ["-","-","-","-","-","-","-","-","-","-"],
      ["-","-","-","-","-","-","-","-","-","-"],
      ["-","-","-","-","-","-","-","-","-","-"],
      ["-","-","-","-","-","-","-","-","-","-"],
      ["-","-","-","-","-","-","-","-","-","-"],
      ["-","-","-","-","-","-","-","-","-","-"],
      ["-","-","-","-","-","-","-","-","-","-"],
      ["-","-","-","-","-","-","-","-","-","-"],
      ["-","-","-","-","-","-","-","-","-","-"],
      ["X","-","-","-","-","-","-","-","-","-"]
    ]
  end

  it "moves the robot north by one position" do
    warehouse.move_robot("N")
    expect(warehouse.display).to eq [
      ["-","-","-","-","-","-","-","-","-","-"],
      ["-","-","-","-","-","-","-","-","-","-"],
      ["-","-","-","-","-","-","-","-","-","-"],
      ["-","-","-","-","-","-","-","-","-","-"],
      ["-","-","-","-","-","-","-","-","-","-"],
      ["-","-","-","-","-","-","-","-","-","-"],
      ["-","-","-","-","-","-","-","-","-","-"],
      ["-","-","-","-","-","-","-","-","-","-"],
      ["X","-","-","-","-","-","-","-","-","-"],
      ["-","-","-","-","-","-","-","-","-","-"]
    ]
  end

  it "moves the robot east by one position" do
    warehouse.move_robot("E")
    expect(warehouse.display).to eq [
      ["-","-","-","-","-","-","-","-","-","-"],
      ["-","-","-","-","-","-","-","-","-","-"],
      ["-","-","-","-","-","-","-","-","-","-"],
      ["-","-","-","-","-","-","-","-","-","-"],
      ["-","-","-","-","-","-","-","-","-","-"],
      ["-","-","-","-","-","-","-","-","-","-"],
      ["-","-","-","-","-","-","-","-","-","-"],
      ["-","-","-","-","-","-","-","-","-","-"],
      ["-","-","-","-","-","-","-","-","-","-"],
      ["-","X","-","-","-","-","-","-","-","-"]
    ]
  end

  it "moves the robot south by one position" do
    warehouse.move_robot("N")
    warehouse.move_robot("S")
    expect(warehouse.display).to eq [
      ["-","-","-","-","-","-","-","-","-","-"],
      ["-","-","-","-","-","-","-","-","-","-"],
      ["-","-","-","-","-","-","-","-","-","-"],
      ["-","-","-","-","-","-","-","-","-","-"],
      ["-","-","-","-","-","-","-","-","-","-"],
      ["-","-","-","-","-","-","-","-","-","-"],
      ["-","-","-","-","-","-","-","-","-","-"],
      ["-","-","-","-","-","-","-","-","-","-"],
      ["-","-","-","-","-","-","-","-","-","-"],
      ["X","-","-","-","-","-","-","-","-","-"]
    ]
  end

  it "moves the robot west by one position" do
    warehouse.move_robot("E")
    warehouse.move_robot("W")
    expect(warehouse.display).to eq [
      ["-","-","-","-","-","-","-","-","-","-"],
      ["-","-","-","-","-","-","-","-","-","-"],
      ["-","-","-","-","-","-","-","-","-","-"],
      ["-","-","-","-","-","-","-","-","-","-"],
      ["-","-","-","-","-","-","-","-","-","-"],
      ["-","-","-","-","-","-","-","-","-","-"],
      ["-","-","-","-","-","-","-","-","-","-"],
      ["-","-","-","-","-","-","-","-","-","-"],
      ["-","-","-","-","-","-","-","-","-","-"],
      ["X","-","-","-","-","-","-","-","-","-"]
    ]
  end

  it "moving the robot south out of bounds raises an error" do
    expect { warehouse.move_robot("S") }.to raise_error(WarehouseRobot::OutOfBoundsError)
  end
end
